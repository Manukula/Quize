<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>HTML Quiz</title>

<link rel="stylesheet" href="style.css" />

<!-- EmailJS library -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  (function() {
    emailjs.init("K050wx49i_RQzr5oT");
  })();
</script>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .app { max-width: 500px; margin: auto; }
    .hidden { display: none; }
    .btn { display: block; margin: 8px 0; padding: 10px; cursor: pointer; }
    input[type="text"], input[type="email"] { width: 100%; padding: 8px; margin: 5px 0; }
    #start-btn { margin-top: 10px; }
</style>
</head>
<body> 
<div class="app">

    <!-- User Info Form -->
    <div id="user-form">
        <h1>Enter Your Details</h1>
        <label>Name:</label>
        <input type="text" id="user-name" placeholder="Your name" required>
        <label>Email:</label>
        <input type="email" id="user-email" placeholder="Your email" required>
        <button id="start-btn" class="btn">Start Quiz</button>
    </div>

    <!-- Quiz Section -->
    <div id="quiz-section" class="hidden">
        <h1>Computer Essentials</h1>
        <div class="quiz">
            <h2 id="question">Question goes here</h2>
            <div id="answers-buttons"></div>
            <button id="next-btn" style="display:none;">Next</button>
        </div>
    </div>

</div>

<script>
const questions = 

[
  {
    "question": "Which of the following is known as the term ICT?",
    "answers": [
      { "text": "Information and Commercial Technology", "correct": false },
      { "text": "Information and Communication Technology", "correct": true },
      { "text": "Information and Computer Technology", "correct": false },
      { "text": "Internet and Computer Technology", "correct": false }
    ]
  },
  {
    "question": "Which technology allows you to surf the internet on a notebook, tablet, or smartphone anytime and anywhere?",
    "answers": [
      { "text": "Mobile technology", "correct": true },
      { "text": "Information retrieval services", "correct": false },
      { "text": "Productivity services", "correct": false },
      { "text": "Office applications", "correct": false }
    ]
  },
    {
    "question": "Which one of the following is a location where you can display on the desktop background an image?",
    "answers": [
      { "text": "On the desktop background ", "correct": true },
      { "text": "Wallpaper", "correct": false },
      { "text": "PIC", "correct": false },
      { "text": "Office applications", "correct": false }
    ]
  },
  {
    "question": "Which of the following programs is best suited for calculating and evaluating business figures?",
    "answers": [
      { "text": "Spreadsheet", "correct": true },
      { "text": "Access", "correct": false },
      { "text": "Calculator", "correct": false },
      { "text": "External hard disk", "correct": false }
    ]
  },
    {
    "question": "which one of the following statements applies to an intranet?",
    "answers": [
      { "text": "restrict only the people form accessing the wifi", "correct": false },
      { "text": "An intranet is based on the same technology as the internet", "correct": true },
      { "text": "Intranet is free to everyone and private", "correct": false },
      { "text": "It is aglobal connection of connected computers", "correct": false }
    ]
  },
  {
    "question": "Which task can be set at the operating system level?",
    "answers": [
      { "text": "Webcam", "correct": false },
      { "text": "Printer", "correct": false },
      { "text": "Microphone", "correct": true },
      { "text": "Speakers", "correct": false }
    ]
  },
    {
    "question": "Which one of the following things can and ought to be recycled?",
    "answers": [
      { "text": "Computer", "correct": false },
      { "text": "Printer", "correct": false },
      { "text": "Microphone", "correct": true },
      { "text": "Speakers", "correct": false }
    ]
  },
  {
    "question": "What task can you perform in the print job queue window?",
    "answers": [
      { "text": "Pause or cancel a print job", "correct": false },
      { "text": "Add more print jobs", "correct": true },
      { "text": "Print more copies", "correct": false },
      { "text": "Configure firmware", "correct": false }
    ]
  },
  {
    "question": "Which of the following is considered an input/output port?",
    "answers": [
      { "text": "Hard disk", "correct": false },
      { "text": "Webcam", "correct": true },
      { "text": "Printer-scanner", "correct": false },
      { "text": "Table division", "correct": false }
    ]
  },
  {
    "question": "What is created by organizing folders and subfolders on a drive?",
    "answers": [
      { "text": "Hard disk", "correct": false },
      { "text": "Hierarchical structure", "correct": true },
      { "text": "Printer-scanner", "correct": false },
      { "text": "Table division", "correct": false }
    ]
  },
  {
    "question": "Which option is used to shut down a non-responding application?",
    "answers": [
      { "text": "Recycle Bin", "correct": false },
      { "text": "Task Manager", "correct": true },
      { "text": "Close button", "correct": false },
      { "text": "Default application", "correct": false }
    ]
  },
  {
    "question": "Which storage option can you access via the internet from any computer?",
    "answers": [
      { "text": "Cloud storage", "correct": true },
      { "text": "Recycle Bin", "correct": false },
      { "text": "Task Manager", "correct": false },
      { "text": "Default application", "correct": false }
    ]
  },
  {
    "question": "Which statement is true regarding file sizes?",
    "answers": [
      { "text": "A 1GB file is larger than a 100MB file", "correct": true },
      { "text": "A 1TB file is smaller than a 500GB file", "correct": false },
      { "text": "A 1000MB file is larger than a 2GB file", "correct": true },
      { "text": "A 2000GB file is smaller than a 1MB file", "correct": false }
    ]
  },
  {
    "question": "What does compressing files do?",
    "answers": [
      { "text": "Adds space inside each cell", "correct": false },
      { "text": "Uses less memory space", "correct": true },
      { "text": "Frees up space", "correct": false },
      { "text": "Sets cell border thickness", "correct": false }
    ]
  },
  {
    "question": "Why use an open WLAN in public places?",
    "answers": [
      { "text": "To establish an internet connection for devices", "correct": true },
      { "text": "To set background color", "correct": false },
      { "text": "To change text color", "correct": false },
      { "text": "To change font size", "correct": false }
    ]
  },
  {
    "question": "What helps recover data lost due to hardware damage, fire, or floods?",
    "answers": [
      { "text": "Defining a column", "correct": false },
      { "text": "Creating an unordered list", "correct": false },
      { "text": "Creating an ordered (numbered) list", "correct": true },
      { "text": "Inserting a line break", "correct": false }
    ]
  },
  {
    "question": "What can lead to PC infection by a computer virus?",
    "answers": [
      { "text": "Opening an attachment from an unknown source", "correct": true },
      { "text": "Creating a heading", "correct": false },
      { "text": "Defining a rule for alignment", "correct": false },
      { "text": "Inserting a horizontal line", "correct": false }
    ]
  },
  {
    "question": "In which scenario is data transmitted from a local computer to another over the internet?",
    "answers": [
      { "text": "Upload", "correct": true },
      { "text": "Download", "correct": false },
      { "text": "It", "correct": false },
      { "text": "Em", "correct": false }
    ]
  },
  {
    "question": "Which is required to connect multiple computers to the same printer?",
    "answers": [
      { "text": "Wi-Fi", "correct": false},
      { "text": "Network", "correct": true},
      { "text": "ISP", "correct": false },
      { "text": "Cable", "correct": false }
    ]
  },
  {
    "question": "Which technology protects a network from unauthorized access?",
    "answers": [
      { "text": "VPN", "correct": true },
      { "text": "Network", "correct": false },
      { "text": "Firewall", "correct": true },
      { "text": "Antivirus", "correct": false }
    ]
  },
  {
    "question": "When considering download and upload speeds, data volume, and costs, which factor is important?",
    "answers": [
      { "text": "Choosing an ISP", "correct": true },
      { "text": "Using a router", "correct": false },
      { "text": "Using Wi-Fi", "correct": false },
      { "text": "Configuring network settings", "correct": false }
    ]
  }
]


const questionElement = document.getElementById('question');
const answersContainer = document.getElementById('answers-buttons');
const nextButton = document.getElementById('next-btn');

let currentQuestionIndex = 0;
let score = 0;
let answered = false;
let userName = "";
let userEmail = "";

// Start button event
document.getElementById('start-btn').addEventListener('click', () => {
    const nameInput = document.getElementById('user-name').value.trim();
    const emailInput = document.getElementById('user-email').value.trim();

    if (!nameInput || !emailInput) {
        alert("Please enter your name and email before starting.");
        return;
    }

    userName = nameInput;
    userEmail = emailInput;

    document.getElementById('user-form').classList.add('hidden');
    document.getElementById('quiz-section').classList.remove('hidden');
    startQuiz();
});

function startQuiz() {
    currentQuestionIndex = 0;
    score = 0;
    showQuestion();
}

function showQuestion() {
    resetState();
    answered = false;
    const currentQuestion = questions[currentQuestionIndex];
    questionElement.textContent = `${currentQuestionIndex + 1}. ${currentQuestion.question}`;

    if (currentQuestion.input) {
        // Create input box for user answer
        const input = document.createElement('input');
        input.type = 'text';
        input.id = 'answer-input';
        input.placeholder = 'Type your answer here';

        // Add event listener for pressing Enter
        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                processInputAnswer();
            }
        });

        answersContainer.appendChild(input);
        nextButton.style.display = 'none';

        // Enable Next button only when user types something
        input.addEventListener('input', () => {
            if (input.value.trim() !== '') {
                nextButton.style.display = 'block';
            } else {
                nextButton.style.display = 'none';
            }
        });
    } else {
        // Create answer buttons
        currentQuestion.answers.forEach(answer => {
            const btn = document.createElement("button");
            btn.textContent = answer.text;
            btn.classList.add("btn");
            if (answer.correct) {
                btn.dataset.correct = "true";
            }
            btn.addEventListener('click', selectAnswer);
            answersContainer.appendChild(btn);
        });
        nextButton.style.display = 'none'; // hide Next until answer
    }
}

function resetState() {
    nextButton.style.display = "none";
    answersContainer.innerHTML = "";
}

// For multiple choice questions
function selectAnswer(e) {
    if (answered) return;
    answered = true;
    const selectedButton = e.target;
    const correct = selectedButton.dataset.correct === "true";

    if (correct) {
        score++;
        selectedButton.style.backgroundColor = "green";
    } else {
        selectedButton.style.backgroundColor = "red";
    }

    // Highlight correct answer
    Array.from(answersContainer.children).forEach(btn => {
        if (btn.dataset.correct === "true") {
            btn.style.backgroundColor = "green";
        }
        btn.disabled = true;
    });

    nextButton.style.display = 'block';
}

// Handle answer for input questions
function processInputAnswer() {
    if (answered) return;
    answered = true;
    const inputEl = document.getElementById('answer-input');
    const userInput = inputEl.value.trim();
    if (!userInput) {
        alert("Please type an answer");
        answered = false;
        return;
    }
    const currentQuestion = questions[currentQuestionIndex];
    // Check against all acceptable answers (case-insensitive)
    const normalizedInput = userInput.toLowerCase();
    const isCorrect = currentQuestion.correctAnswers.some(ans => ans.toLowerCase() === normalizedInput);
    if (isCorrect) {
        score++;
        inputEl.style.backgroundColor = "lightgreen";
    } else {
        inputEl.style.backgroundColor = "salmon";
    }
    inputEl.disabled = true;
    nextButton.style.display = 'block';
}

// Next button event
nextButton.addEventListener('click', () => {
    if (questions[currentQuestionIndex].input && !answered) {
        processInputAnswer();
        return;
    }
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
        showQuestion();
    } else {
        finishQuiz();
    }
});

function finishQuiz() {
    const resultText = `${userName}, you completed the quiz! Your score: ${score} / ${questions.length}`;
    questionElement.textContent = resultText;
    resetState();

    // Send results via emailjs
    emailjs.send("service_885i0iw", "template_3f7db48", {
        to_email: "nkosi@inkcubeko.org.za",
        message: resultText
    });
    emailjs.send("service_885i0iw", "template_3f7db48", {
        to_email: userEmail,
        message: resultText
    }).then(() => {
        alert("Results sent to you and the participant!");
    }).catch((error) => {
        alert("Error sending results: " + JSON.stringify(error));
    });
}
</script>
</body>
</html>

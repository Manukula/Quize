<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Computer Essentials Quiz</title>

<link rel="stylesheet" href="style.css" />

<!-- EmailJS library -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  (function() {
    emailjs.init("K050wx49i_RQzr5oT");
  })();
</script>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .app { max-width: 500px; margin: auto; }
    .hidden { display: none; }
    .btn { display: block; margin: 8px 0; padding: 10px; cursor: pointer; }
    input[type="text"], input[type="email"] { width: 100%; padding: 8px; margin: 5px 0; }
    #start-btn { margin-top: 10px; }
</style>
</head>
<body> 
<div class="app">

    <!-- User Info Form -->
    <div id="user-form">
        <h1>Enter Your Details</h1>
        <label>Name:</label>
        <input type="text" id="user-name" placeholder="Your name" required>
        <label>Email:</label>
        <input type="email" id="user-email" placeholder="Your email" required>
        <button id="start-btn" class="btn">Start Quiz</button>
    </div>

    <!-- Quiz Section -->
    <div id="quiz-section" class="hidden">
        <h1>Computer Essentials</h1>
        <div class="quiz">
            <h2 id="question">Question goes here</h2>
            <div id="answers-buttons"></div>
            <button id="next-btn" style="display:none;">Next</button>
        </div>
    </div>

</div>

<script>
const questions =[
  {
    "question": "Which of the following can be considered hardware?",
    "answers": [
      { "text": "Keyboard and mouse", "correct": true },
      { "text": "Mouse and Wi-Fi", "correct": false },
      { "text": "Hard disk and Bluetooth", "correct": false },
      { "text": "Hard disk and Wi-Max", "correct": false }
    ]
  },
  {
    "question": "Which file type represents a sound file?",
    "answers": [
      { "text": "XLSX", "correct": false },
      { "text": "PDF", "correct": false },
      { "text": "WAV", "correct": true },
      { "text": "DOCX", "correct": false }
    ]
  },
  {
    "question": "Which of the following is not true about RAM?",
    "answers": [
      { "text": "Read and write access", "correct": false },
      { "text": "Long term memory storage", "correct": true },
      { "text": "Very volatile", "correct": false },
      { "text": "Working memory", "correct": false }
    ]
  },
  {
    "question": "What is the primary purpose of a folder in a computer?",
    "answers": [
      { "text": "To organize files and other folders", "correct": true },
      { "text": "To store hardware components", "correct": false },
      { "text": "To display graphics", "correct": false },
      { "text": "To connect to the internet", "correct": false }
    ]
  },
  {
    "question": "Which one manages the hard disk on a computer?",
    "answers": [
      { "text": "Operating system", "correct": true },
      { "text": "Word processing application", "correct": false },
      { "text": "Presentation application", "correct": false },
      { "text": "Web browser", "correct": false }
    ]
  },
  {
    "question": "Which is used to share data privately?",
    "answers": [
      { "text": "Intranet", "correct": true },
      { "text": "VOIP", "correct": false },
      { "text": "Emails", "correct": false },
      { "text": "Flash drive", "correct": false }
    ]
  },
  {
    "question": "Which of the following has the largest storage capacity?",
    "answers": [
      { "text": "20,000 KB hard disk", "correct": false },
      { "text": "200 GB hard disk", "correct": false },
      { "text": "2000 MB hard disk", "correct": false },
      { "text": "2 TB hard disk", "correct": true }
    ]
  },
  {
    "question": "Which cannot be considered software?",
    "answers": [
      { "text": "Operating system", "correct": false },
      { "text": "Productivity application", "correct": false },
      { "text": "Proprietary license", "correct": true },
      { "text": "Communication application", "correct": false }
    ]
  },
  {
    "question": "Which device is considered both an input and output device?",
    "answers": [
      { "text": "Touchscreen", "correct": true },
      { "text": "Printer", "correct": false },
      { "text": "Mouse", "correct": false },
      { "text": "Keyboard", "correct": false }
    ]
  },
  {
    "question": "What can be considered VOIP?",
    "answers": [
      { "text": "Share video over a network", "correct": false },
      { "text": "Make phone and video calls over the internet", "correct": true },
      { "text": "Make phone and video calls over the intranet", "correct": false },
      { "text": "Download files from the internet", "correct": false }
    ]
  },
  {
    "question": "Which one can reduce the size of a folder and its contents?",
    "answers": [
      { "text": "Anti-virus software", "correct": false },
      { "text": "Compression software", "correct": true },
      { "text": "Extracting software", "correct": false },
      { "text": "Application software", "correct": false }
    ]
  },
  {
    "question": "Which malware can self-replicate and spread without a host?",
    "answers": [
      { "text": "Spyware", "correct": false },
      { "text": "Virus", "correct": false },
      { "text": "Trojan", "correct": false },
      { "text": "Worm", "correct": true }
    ]
  },
  {
    "question": "What is the general purpose of a computer?",
    "answers": [
      { "text": "Accepting, processing, storing, and displaying data", "correct": true },
      { "text": "Playing games only", "correct": false },
      { "text": "Browsing the internet only", "correct": false },
      { "text": "Printing documents only", "correct": false }
    ]
  },
  {
    "question": "Which best describes a VPN?",
    "answers": [
      { "text": "Service that allows safe and private internet access", "correct": true },
      { "text": "Global network of connected computers", "correct": false },
      { "text": "Private network accessible to employees", "correct": false },
      { "text": "Service that allows safe and private intranet access", "correct": false }
    ]
  },
  {
    "question": "Which software can be freely downloaded but requires registration and payment for use?",
    "answers": [
      { "text": "Shareware", "correct": true },
      { "text": "Freeware", "correct": false },
      { "text": "Firmware", "correct": false },
      { "text": "Open source", "correct": false }
    ]
  },
  {
    "question": "Which port can transfer high-quality, high-bandwidth audio and video streams?",
    "answers": [
      { "text": "HDMI", "correct": true },
      { "text": "USB", "correct": false },
      { "text": "CPU", "correct": false },
      { "text": "RAM", "correct": false }
    ]
  },
  {
    "question": "Which is software that may enhance accessibility?",
    "answers": [
      { "text": "Voice recognition software", "correct": true },
      { "text": "Communication Software", "correct": false },
      { "text": "Application software", "correct": false },
      { "text": "Operating system software", "correct": false }
    ]
  },
  {
    "question": "Which technology standard is used for long-distance wireless networking for mobile devices?",
    "answers": [
      { "text": "Wi-Max", "correct": true },
      { "text": "Fibre optics", "correct": false },
      { "text": "Wi-Fi", "correct": false },
      { "text": "Cabled", "correct": false }
    ]
  },
  {
    "question": "What is the main purpose of an operating system?",
    "answers": [
      { "text": "To manage hardware and software resources", "correct": true },
      { "text": "To provide internet access", "correct": false },
      { "text": "To create documents", "correct": false },
      { "text": "To play games", "correct": false }
    ]
  }
]


const questionElement = document.getElementById('question');
const answersContainer = document.getElementById('answers-buttons');
const nextButton = document.getElementById('next-btn');

let currentQuestionIndex = 0;
let score = 0;
let answered = false;
let userName = "";
let userEmail = "";

// Start button event
document.getElementById('start-btn').addEventListener('click', () => {
    const nameInput = document.getElementById('user-name').value.trim();
    const emailInput = document.getElementById('user-email').value.trim();

    if (!nameInput || !emailInput) {
        alert("Please enter your name and email before starting.");
        return;
    }

    userName = nameInput;
    userEmail = emailInput;

    document.getElementById('user-form').classList.add('hidden');
    document.getElementById('quiz-section').classList.remove('hidden');
    startQuiz();
});

function startQuiz() {
    currentQuestionIndex = 0;
    score = 0;
    showQuestion();
}

function showQuestion() {
    resetState();
    answered = false;
    const currentQuestion = questions[currentQuestionIndex];
    questionElement.textContent = `${currentQuestionIndex + 1}. ${currentQuestion.question}`;

    if (currentQuestion.input) {
        // Create input box for user answer
        const input = document.createElement('input');
        input.type = 'text';
        input.id = 'answer-input';
        input.placeholder = 'Type your answer here';

        // Add event listener for pressing Enter
        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                processInputAnswer();
            }
        });

        answersContainer.appendChild(input);
        nextButton.style.display = 'none';

        // Enable Next button only when user types something
        input.addEventListener('input', () => {
            if (input.value.trim() !== '') {
                nextButton.style.display = 'block';
            } else {
                nextButton.style.display = 'none';
            }
        });
    } else {
        // Create answer buttons
        currentQuestion.answers.forEach(answer => {
            const btn = document.createElement("button");
            btn.textContent = answer.text;
            btn.classList.add("btn");
            if (answer.correct) {
                btn.dataset.correct = "true";
            }
            btn.addEventListener('click', selectAnswer);
            answersContainer.appendChild(btn);
        });
        nextButton.style.display = 'none'; // hide Next until answer
    }
}

function resetState() {
    nextButton.style.display = "none";
    answersContainer.innerHTML = "";
}

// For multiple choice questions
function selectAnswer(e) {
    if (answered) return;
    answered = true;
    const selectedButton = e.target;
    const correct = selectedButton.dataset.correct === "true";

    if (correct) {
        score++;
        selectedButton.style.backgroundColor = "green";
    } else {
        selectedButton.style.backgroundColor = "red";
    }

    // Highlight correct answer
    Array.from(answersContainer.children).forEach(btn => {
        if (btn.dataset.correct === "true") {
            btn.style.backgroundColor = "green";
        }
        btn.disabled = true;
    });

    nextButton.style.display = 'block';
}

// Handle answer for input questions
function processInputAnswer() {
    if (answered) return;
    answered = true;
    const inputEl = document.getElementById('answer-input');
    const userInput = inputEl.value.trim();
    if (!userInput) {
        alert("Please type an answer");
        answered = false;
        return;
    }
    const currentQuestion = questions[currentQuestionIndex];
    // Check against all acceptable answers (case-insensitive)
    const normalizedInput = userInput.toLowerCase();
    const isCorrect = currentQuestion.correctAnswers.some(ans => ans.toLowerCase() === normalizedInput);
    if (isCorrect) {
        score++;
        inputEl.style.backgroundColor = "lightgreen";
    } else {
        inputEl.style.backgroundColor = "salmon";
    }
    inputEl.disabled = true;
    nextButton.style.display = 'block';
}

// Next button event
nextButton.addEventListener('click', () => {
    if (questions[currentQuestionIndex].input && !answered) {
        processInputAnswer();
        return;
    }
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
        showQuestion();
    } else {
        finishQuiz();
    }
});

function finishQuiz() {
    const resultText = `${userName}, you completed the quiz! Your score: ${score} / ${questions.length}`;
    questionElement.textContent = resultText;
    resetState();

    // Send results via emailjs
    emailjs.send("service_885i0iw", "template_3f7db48", {
        to_email: "nkosi@inkcubeko.org.za",
        message: resultText
    });
    emailjs.send("service_885i0iw", "template_3f7db48", {
        to_email: userEmail,
        message: resultText
    }).then(() => {
        alert("Results sent to you and the participant!");
    }).catch((error) => {
        alert("Error sending results: " + JSON.stringify(error));
    });
}
</script>
</body>
</html>
